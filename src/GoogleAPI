import { useEffect } from "react";

const CLIENT_ID = "AIzaSyD04xU5kqRydyHVcjD6tF0QvVwgA5_dA5Q";
const API_KEY = "294439577776-nte4dsg8qv4ja0c69je402oq5gdbs668.apps.googleusercontent.com";
const DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];
const SCOPES = "https://www.googleapis.com/auth/drive.file";

function GoogleAPI() {
    useEffect(() => {
        const loadGapiClient = () => {
            gapi.load("client:auth2", async () => {
                await gapi.client.init({
                    apiKey: API_KEY,
                    clientId: CLIENT_ID,
                    discoveryDocs: DISCOVERY_DOCS,
                    scope: SCOPES
                });
                console.log("✅ Google API 클라이언트 초기화 완료!");
            });
        };

        // gapi가 로드될 때까지 기다리기
        if (window.gapi) {
            loadGapiClient();
        } else {
            const script = document.createElement("script");
            script.src = "https://apis.google.com/js/api.js";
            script.async = true;
            script.onload = loadGapiClient;
            document.body.appendChild(script);
        }
    }, []);

    return <div>Google API 연결 중...</div>;
}

export default GoogleAPI;